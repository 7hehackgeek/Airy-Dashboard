<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Airy Dashboard</title>
  <!-- Boxicons -->
  <link href='https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css' rel='stylesheet'>
  <!-- Custom CSS -->
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- SIDEBAR -->
  <section id="sidebar">
    <a href="#" class="brand">
      <i class='bx bxs-dashboard'></i>
      <span class="text">Airy Dashboard</span>
    </a>
    <ul class="side-menu top">
      <li class="active">
        <a href="#">
          <i class='bx bxs-dashboard'></i>
          <span class="text">Dashboard</span>
        </a>
      </li>
    </ul>
    <ul class="side-menu">
      <li>
        <a href="#" class="logout">
          <i class='bx bxs-log-out-circle'></i>
          <span class="text">Logout</span>
        </a>
      </li>
    </ul>
  </section>
  <!-- SIDEBAR -->

  <!-- CONTENT -->
  <section id="content">
    <!-- NAVBAR -->
    <nav>
      <i class='bx bx-menu'></i>
      <a href="#" class="nav-link">Dashboard</a>
      <form action="#">
        <div class="form-input">
          <input type="search" placeholder="Search...">
          <button type="submit" class="search-btn"><i class='bx bx-search'></i></button>
        </div>
      </form>
      <input type="checkbox" id="switch-mode" hidden>
      <label for="switch-mode" class="switch-mode"></label>
      <a href="#" class="notification">
        <i class='bx bxs-bell'></i>
        <span class="num">0</span>
      </a>
      <a href="#" class="profile">
        <i class='bx bxs-user'></i>
      </a>
    </nav>
    <!-- NAVBAR -->

    <!-- MAIN -->
    <main>
      <div class="head-title">
        <div class="left">
          <h1>Dashboard</h1>
          <ul class="breadcrumb">
            <li><a href="#">Dashboard</a></li>
            <li><i class='bx bx-chevron-right'></i></li>
            <li><a class="active" href="#">Active Connections</a></li>
          </ul>
        </div>
        <div class="right">
          <button id="refresh-btn" class="btn btn-refresh">
            <i class='bx bx-refresh'></i>
            <span>Refresh</span>
          </button>
        </div>
      </div>

      <!-- Active Connections Section -->
      <section id="active-connections">
        <h2>Active Connections</h2>
        <table id="connections-table">
          <thead>
            <tr>
              <th>Position</th>
              <th>Device ID</th>
              <th>Status</th>
              <th>Confirmed</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <!-- Populated dynamically -->
          </tbody>
        </table>
      </section>

      <!-- Tabs Navigation -->
      <div class="tabs">
        <button class="tablink active" onclick="openTab(event, 'Queue')">Queue</button>
        <button class="tablink" onclick="openTab(event, 'Ratings')">Ratings</button>
      </div>

      <!-- Queue Tab -->
      <div id="Queue" class="tabcontent" style="display:block;">
        <h2>Current Queue</h2>
        <div class="controls">
          <button onclick="fetchQueueData()">Refresh Queue</button>
          <button id="pauseResumeButton" onclick="togglePause()" disabled>Pause Queue</button>
          <span id="pauseStatus" style="margin-left: 10px; color: orange; display: none;">(Paused)</span>
        </div>
        <table>
          <thead>
            <tr>
              <th>Position</th>
              <th>Device ID</th>
              <th>Status</th>
              <th>Confirmed</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="queueTableBody">
            <!-- Queue data will be populated here -->
          </tbody>
        </table>
      </div>

      <!-- Ratings Tab -->
      <div id="Ratings" class="tabcontent">
        <h2>User Ratings</h2>
        <button onclick="fetchRatings()">Refresh Ratings</button>
        <table id="ratingsTable">
          <thead>
            <tr>
              <th>Timestamp</th>
              <th>Rating (Stars)</th>
              <th>Device ID</th>
            </tr>
          </thead>
          <tbody id="ratingsTableBody">
            <!-- Rating rows will be inserted here -->
          </tbody>
        </table>
      </div>
    </main>
    <!-- MAIN -->
  </section>
  <!-- CONTENT -->

  <script src="script.js"></script>
</body>
</html>
